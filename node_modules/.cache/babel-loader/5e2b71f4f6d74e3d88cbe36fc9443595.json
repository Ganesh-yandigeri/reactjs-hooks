{"ast":null,"code":"import { PRODUCT_DATA, GET_ALL_PRODUCTS, DELETE_CART_ITEM, ADD_ONE_ITEM, SUB_ONE_ITEM } from '../actions/types';\nconst initialState = {\n  allProducts: [{\n    id: 1,\n    name: \"tachyons\",\n    img: \"https://picsum.photos/seed/picsum/200/300\",\n    price: 100,\n    available: 1\n  }, {\n    id: 2,\n    name: \"Grayscale\",\n    img: \"https://picsum.photos/200/300?grayscale\",\n    price: 30,\n    available: 1\n  }, {\n    id: 3,\n    name: \"Blur\",\n    img: \"https://picsum.photos/200/300/?blur\",\n    price: 50,\n    available: 1\n  }, {\n    id: 4,\n    name: \"Blur - 2\",\n    img: \"https://picsum.photos/id/870/200/300?grayscale&blur=2\",\n    price: 70,\n    available: 1\n  }],\n  cart: [{\n    id: 2,\n    name: \"Grayscale\",\n    img: \"https://picsum.photos/200/300?grayscale\",\n    price: 30,\n    units: 1\n  }],\n  cartSubtotal: 30\n};\nexport const productReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case GET_ALL_PRODUCTS:\n      return state.allProducts;\n\n    case PRODUCT_DATA:\n      const existingProduct = state.cart.filter(cart => cart.id === action.payload.id);\n\n      if (existingProduct.length > 0) {\n        const withoutExistingProduct = state.cart.filter(p => p.id !== action.payload.id);\n        const updateUnits = { ...existingProduct[0],\n          units: existingProduct[0].units + action.payload.units\n        };\n        return {\n          allProducts: state.allProducts,\n          cart: [...withoutExistingProduct, updateUnits],\n          cartSubtotal: state.cartSubtotal + existingProduct[0].units * action.payload.price\n        };\n      } else {\n        return {\n          allProducts: state.allProducts,\n          cart: [action.payload, ...state.cart],\n          cartSubtotal: state.cartSubtotal + action.payload.price\n        };\n      }\n\n    case DELETE_CART_ITEM:\n      const remaningCart = state.cart.filter(cart => cart.id !== action.payload.id);\n      return {\n        allProducts: state.allProducts,\n        ...state.cart,\n        cart: remaningCart,\n        cartSubtotal: state.cartSubtotal - action.payload.price\n      };\n\n    case ADD_ONE_ITEM:\n      const existingCartItem = state.cart.filter(cart => cart.id === action.payload.id);\n\n      if (existingCartItem.length > 0) {\n        const withoutExistingCartItems = state.cart.filter(p => p.id !== action.payload.id);\n        const updateCartUnits = { ...existingCartItem[0],\n          units: existingCartItem[0].units + 1\n        };\n        return {\n          allProducts: state.allProducts,\n          cart: [...withoutExistingCartItems, updateCartUnits],\n          cartSubtotal: state.cartSubtotal + action.payload.price\n        };\n      }\n\n    case SUB_ONE_ITEM:\n      const subExistingCartItem = state.cart.filter(cart => cart.id === action.payload.id);\n\n      if (subExistingCartItem.length > 0 && action.payload.units > 1) {\n        const subWithoutExistingCartItems = state.cart.filter(p => p.id !== action.payload.id);\n        const subUpdateCartUnits = { ...subExistingCartItem[0],\n          units: subExistingCartItem[0].units - 1\n        };\n        return {\n          allProducts: state.allProducts,\n          cart: [...subWithoutExistingCartItems, subUpdateCartUnits],\n          cartSubtotal: state.cartSubtotal - action.payload.price\n        };\n        break;\n      }\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/home/ganesh/Documents/reactGapp/awsapp/src/reducer/productReducer.js"],"names":["PRODUCT_DATA","GET_ALL_PRODUCTS","DELETE_CART_ITEM","ADD_ONE_ITEM","SUB_ONE_ITEM","initialState","allProducts","id","name","img","price","available","cart","units","cartSubtotal","productReducer","state","action","type","existingProduct","filter","payload","length","withoutExistingProduct","p","updateUnits","remaningCart","existingCartItem","withoutExistingCartItems","updateCartUnits","subExistingCartItem","subWithoutExistingCartItems","subUpdateCartUnits"],"mappings":"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","sourcesContent":["import { PRODUCT_DATA,GET_ALL_PRODUCTS, DELETE_CART_ITEM, ADD_ONE_ITEM, SUB_ONE_ITEM } from '../actions/types';\n\n\nconst initialState = {\n    allProducts: [\n        {\n            id: 1,\n            name: \"tachyons\",\n            img: \"https://picsum.photos/seed/picsum/200/300\",\n            price: 100,\n            available: 1\n        },\n        {\n            id: 2,\n            name: \"Grayscale\",\n            img: \"https://picsum.photos/200/300?grayscale\",\n            price: 30,\n            available: 1\n        },\n        {\n            id: 3,\n            name: \"Blur\",\n            img: \"https://picsum.photos/200/300/?blur\",\n            price: 50,\n            available: 1\n        },\n        {\n            id: 4,\n            name: \"Blur - 2\",\n            img: \"https://picsum.photos/id/870/200/300?grayscale&blur=2\",\n            price: 70,\n            available: 1\n        }\n    ],\n    cart: [\n        {\n            id: 2,\n            name: \"Grayscale\",\n            img: \"https://picsum.photos/200/300?grayscale\",\n            price: 30,\n            units: 1\n        }\n    ],\n    cartSubtotal: 30,\n};\n\n\nexport const productReducer = (state = initialState, action) =>{\n    switch(action.type){\n        case GET_ALL_PRODUCTS:\n            return state.allProducts;\n        case PRODUCT_DATA:\n            const existingProduct = state.cart.filter((cart) => cart.id === action.payload.id);\n            if(existingProduct.length > 0){\n                const withoutExistingProduct = state.cart.filter((p) => p.id !== action.payload.id);\n                const updateUnits = {\n                    ...existingProduct[0],\n                    units: existingProduct[0].units + action.payload.units\n                };\n                return {\n                    allProducts: state.allProducts,\n                    cart: [...withoutExistingProduct,updateUnits],\n                    cartSubtotal: (state.cartSubtotal + (existingProduct[0].units * action.payload.price))\n                }\n            }else{\n                return{\n                    allProducts: state.allProducts,\n                    cart: [action.payload, ...state.cart],\n                    cartSubtotal: (state.cartSubtotal + action.payload.price)\n                }\n                \n            }\n        \n        case DELETE_CART_ITEM:\n            const remaningCart = state.cart.filter((cart) => cart.id !== action.payload.id);\n            return{\n                allProducts: state.allProducts,\n                ...state.cart,\n                cart: remaningCart,\n                cartSubtotal: (state.cartSubtotal - action.payload.price)\n            }\n        case ADD_ONE_ITEM:\n            const existingCartItem = state.cart.filter((cart) => cart.id === action.payload.id);\n            if(existingCartItem.length > 0){\n               const withoutExistingCartItems = state.cart.filter((p) => p.id !== action.payload.id);\n            const updateCartUnits = {\n                ...existingCartItem[0],\n                units: existingCartItem[0].units + 1\n            };\n            return{\n                allProducts: state.allProducts,\n                cart: [...withoutExistingCartItems, updateCartUnits],\n                cartSubtotal: (state.cartSubtotal + action.payload.price)\n            }\n        }\n        case SUB_ONE_ITEM:\n            const subExistingCartItem = state.cart.filter((cart) => cart.id === action.payload.id);\n            if(subExistingCartItem.length > 0 && action.payload.units > 1){\n               const subWithoutExistingCartItems = state.cart.filter((p) => p.id !== action.payload.id);\n            const subUpdateCartUnits = {\n                ...subExistingCartItem[0],\n                units: subExistingCartItem[0].units - 1\n            };\n            return{\n                allProducts: state.allProducts,\n                cart: [...subWithoutExistingCartItems, subUpdateCartUnits],\n                cartSubtotal: (state.cartSubtotal - action.payload.price)\n            }\n            break;\n        }\n        default:\n            return state;\n    } \n}\n"]},"metadata":{},"sourceType":"module"}